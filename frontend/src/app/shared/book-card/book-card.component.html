<div class="book-card mat-elevation-z2" [routerLink]="['/books', book._id]">
  <div class="book-cover">
    <div class="cover-skeleton" *ngIf="loading && !book.coverImage">
      <div class="skeleton-shimmer"></div>
    </div>

    <div class="cover-placeholder" *ngIf="!book.coverImage && !loading">
      <mat-icon>menu_book</mat-icon>
    </div>

    <img
      *ngIf="book.coverImage"
      [src]="book.coverImage"
      [alt]="book.title"
      class="cover-image"
      loading="lazy"
      [attr.data-src]="book.coverImage"
    />
  </div>

  <div class="book-info">
    <h3 class="book-title">{{ book.title }}</h3>
    <p class="book-author">by {{ book.author }}</p>
    <p class="book-category">{{ book.category }}</p>
    <div class="book-stats">
      <span class="copies-available">
        Available: {{ book.availableCopies || 0 }}
      </span>
      <span class="total-copies"> Total: {{ book.totalCopies || 0 }} </span>
    </div>
  </div>

  <div class="book-actions" *ngIf="showActions">
    <button mat-raised-button color="primary" disabled class="visual-button">
      {{ (book.availableCopies || 0) > 0 ? "Borrow" : "Reserve" }}
    </button>
  </div>
</div>
