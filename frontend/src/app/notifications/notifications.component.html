<div class="notifications-page">
  <h1>Notifications</h1>

  <!-- Admin scope toggle -->
  <div class="scope-toggle" *ngIf="role === 'admin'" style="margin: 12px 0">
    <mat-form-field appearance="outline" style="width: 280px">
      <mat-label>View</mat-label>
      <mat-select
        [value]="scope"
        (selectionChange)="onScopeChange($event.value)"
      >
        <mat-option value="user">My notifications</mat-option>
        <mat-option value="role">Role-relevant</mat-option>
        <mat-option value="all">All users</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div
    class="notifications-list"
    *ngIf="notifications$ | async as notifications"
  >
    <div *ngIf="notifications.length === 0" class="empty">
      No notifications yet.
    </div>

    <div class="notification-item" *ngFor="let notification of notifications">
      <div class="meta">
        <span class="type">{{ notification.type }}</span>
        <span class="date">{{ notification.createdAt | date : "medium" }}</span>
      </div>
      <div class="title">{{ notification.title }}</div>
      <div class="message">{{ notification.message }}</div>
      <button
        mat-button
        color="primary"
        *ngIf="!notification.isRead && notification.userId === currentUserId"
        (click)="markAsRead(notification.id)"
      >
        Mark as read
      </button>
    </div>
  </div>
</div>
